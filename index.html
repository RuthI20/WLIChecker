<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Weight Loss Injection Eligibility Checker</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 600px;
      margin: 20px auto;
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 10px;
    }
    h2 { color: #2e6da4; }
    label { display: block; margin: 10px 0 5px; }
    input, select {
      padding: 8px;
      width: 100%;
      margin-bottom: 10px;
    }
    button {
      padding: 10px 15px;
      background-color: #2e6da4;
      color: white;
      border: none;
      border-radius: 5px;
    }
    .result {
      margin-top: 20px;
      font-weight: bold;
    }
  </style>
</head>
<body>

<h2>Weight Loss Injection Eligibility Checker</h2>

<form id="eligibilityForm">
  <label for="height">Height (cm):</label>
  <input type="number" id="height" required>

  <label for="weight">Weight (kg):</label>
  <input type="number" id="weight" required>

  <label for="ethnicity">What is your ethnicity?</label>
  <select id="ethnicity" required>
    <option value="">-- Please choose --</option>
    <option value="asian">Asian</option>
    <option value="black_african">Black African</option>
    <option value="black_caribbean">Black Caribbean</option>
    <option value="middle_eastern">Middle Eastern</option>
    <option value="white">White</option>
    <option value="other">Other</option>
  </select>

  <label>Do you have Type 2 Diabetes?</label>
  <select id="diabetes"><option value="no">No</option><option value="yes">Yes</option></select>

  <label>Do you have high blood pressure (treated)?</label>
  <select id="bp"><option value="no">No</option><option value="yes">Yes</option></select>

  <label>Do you have high cholesterol (treated)?</label>
  <select id="cholesterol"><option value="no">No</option><option value="yes">Yes</option></select>

  <label>Do you have obstructive sleep apnoea?</label>
  <select id="apnoea"><option value="no">No</option><option value="yes">Yes</option></select>

  <label>Do you have cardiovascular disease?</label>
  <select id="cvd"><option value="no">No</option><option value="yes">Yes</option></select>

  <button type="submit">Check Eligibility</button>
</form>

<div class="result" id="result"></div>

<script>
document.getElementById('eligibilityForm').addEventListener('submit', function(e) {
  e.preventDefault();

  const height = parseFloat(document.getElementById('height').value);
  const weight = parseFloat(document.getElementById('weight').value);
  const ethnicity = document.getElementById('ethnicity').value;

  const comorbidities = [
    document.getElementById('diabetes').value,
    document.getElementById('bp').value,
    document.getElementById('cholesterol').value,
    document.getElementById('apnoea').value,
    document.getElementById('cvd').value
  ];

  const bmi = weight / ((height / 100) ** 2);
  const bmiRounded = bmi.toFixed(1);

  const comorbidityCount = comorbidities.filter(ans => ans === 'yes').length;

  const highRiskEthnicities = ['asian', 'black_african', 'black_caribbean', 'middle_eastern'];
  const lowerThreshold = highRiskEthnicities.includes(ethnicity) ? 37.5 : 40;

  let message = `<p>Your BMI is <strong>${bmiRounded}</strong>.</p>`;
  message += `<p>You have <strong>${comorbidityCount}</strong> comorbidity/comorbidities.</p>`;

  if (bmi >= lowerThreshold && comorbidityCount >= 4) {
    message += `<p style="color: green;">✅ Based on your answers, you may be eligible for weight loss injections. Please consult your GP.</p>`;
  } else {
    message += `<p style="color: red;">❌ Based on your answers, you may not currently meet the eligibility criteria.</p>`;
  }

  document.getElementById('result').innerHTML = message;
});
</script>

</body>
</html>
